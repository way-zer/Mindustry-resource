---
import { pwaInfo } from "virtual:pwa-info";
import Header from "../components/Header.astro";
interface Props {
    title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="cn">
    <head>
        <meta charset="UTF-8" />
        <title>Mindustry资源站 - {title}</title>
        <meta
            name="description"
            content="像素工厂资源站，丰富的地图资源，大量中文服务器地址"
        />
        <link rel="icon" href="/icons-192.20210425.png" />
        <meta name="viewport" content="width=device-width" />
        <meta name="theme-color" content="#001529" />
        {pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}

        <link
            rel="stylesheet"
            href="//unpkg.com/element-plus/dist/index.css"
            crossorigin="anonymous"
        />
        <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] =
                c[a] ||
                function () {
                    (c[a].q = c[a].q || []).push(arguments);
                };
            t = l.createElement(r);
            t.async = 1;
            t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0];
            y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "gsj4e9xc0u");
        </script>
        <script>
            import { registerSW } from "virtual:pwa-register";

            registerSW({
                immediate: true,
                onRegisteredSW(swScriptUrl) {
                    console.log("SW registered: ", swScriptUrl);
                },
                onOfflineReady() {
                    console.log("PWA application ready to work offline");
                },
            });
        </script>
    </head>
    <body>
        <Header />
        <main class="sm:p-4">
            <div class="border rounded shadow divide-y">
                <div class="p-4 flex flex-row justify-between flex-wrap">
                    <h2 class="flex-none font-black text-lg">{title}</h2>
                    <div class="justify-self-end">
                        <slot name="actions" />
                    </div>
                </div>
                <div class="p-2">
                    <slot />
                </div>
            </div>
        </main>
        <footer class="footer footer-center">
            WayZer @{new Date().getFullYear()}
        </footer>
    </body>
</html>

<style is:global>
    @media (max-width: 768px) {
        .el-dialog {
            width: 100%;
        }
    }
</style>
